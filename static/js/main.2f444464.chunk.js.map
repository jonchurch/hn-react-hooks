{"version":3,"sources":["components/Header.jsx","firebase/index.js","hooks/index.js","helpers.js","components/NewsCard.jsx","components/ListView.jsx","components/Comment.jsx","components/Item.jsx","App.js","serviceWorker.js","index.js","logo.png"],"names":["StyledHeader","styled","header","_templateObject","Header","react_default","a","createElement","className","Link","to","src","Logo","alt","NavLink","exact","activeClassName","firebase","initializeApp","databaseURL","api","database","ref","itemRef","id","child","WHOSHIRING_URL","useItemSubscription","_useState","useState","_useState2","Object","slicedToArray","story","setStory","useEffect","on","snapshot","val","off","useHiringRequest","_useState3","_useState4","hiring","setHiring","asyncToGenerator","regenerator_default","mark","_callee","res","posts","wrap","_context","prev","next","fetch","then","json","sent","hits","slice","stop","this","useTopStories","filter","page","arguments","length","undefined","refPath","path","storyFilter","_useState5","_useState6","stories","setStories","_useState7","_useState8","maxPages","setMaxPages","start","end","ids","console","log","Math","ceil","host","url","parts","replace","split","shift","join","timeAgo","time","between","Date","now","Number","pluralize","label","StyledItemCard","div","NewsCard_templateObject","NewsCard","_ref","score","href","title","concat","by","descendants","Container","ListView_templateObject","ListNav","ListView","_ref3","history","match","params","_useTopStories","_useTopStories2","items","jobs","map","j","objectID","Redirect","style","position","ListView_ListNav","key","CommentContainer","Comment_templateObject","CommentChildren","_templateObject2","props","open","Toggle","onClick","kidCount","Comment","_ref2","_useItemSubscription","text","_useItemSubscription$","kids","deleted","dead","showComments","setShowComments","renderHTML","ItemHeader","Item_templateObject","ItemComments","Item_templateObject2","LinkTitle","Item","ContentView","App_templateObject","App","HashRouter","Switch","Route","component","Component","Boolean","window","location","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.2f444464.chunk.js","sourcesContent":["import React from 'react'\nimport { NavLink, Link } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport Logo from '../logo.png'\n\nconst StyledHeader = styled.header`\n\tbackground-color: #ff6600;\n\tposition: fixed;\n\tz-index: 999;\n\theight: 55px;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\n\t.inner {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: flex-start;\n\t\tmax-width: 800px;\n\t\tbox-sizing: border-box;\n\t\tmargin: 0px auto;\n\t\tpadding: 15px 5px;\n\t}\n\t.logo {\n\t\twidth: 24px;\n\t\tdisplay: inline-block;\n\t\tvertical-align: middle;\n\t}\n\ta {\n\t\tcolor: white;\n\t\tfont-weight: 300;\n\t\tline-height: 24px;\n\t\tletter-spacing: .075em;\n\t\tvertical-align: middle;\n\t\tmargin-right: 1.8em;\n\t}\n\t.active {\n\t\tfont-weight: 600;\n\t}\n\t@media (max-width: 600px) {\n\t\t.inner {\n\t\t\tpadding: 15px;\n\t\t}\n\t\ta {\n\t\t\tmargin-right: 1em;\n\t\t}\n\t}\n`\n\nexport default function Header() {\n\treturn (\n\t\t<StyledHeader>\n\t\t\t<nav className=\"inner\" >\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<img src={Logo} alt=\"Hacker News Logo\" className=\"logo\"/>\n\t\t\t\t</Link>\n\t\t\t\t<NavLink exact to=\"/\" activeClassName=\"active\">Top</NavLink>\n\t\t\t\t<NavLink to=\"/new\" activeClassName=\"active\">New</NavLink>\n\t\t\t\t<NavLink to=\"/show\" activeClassName=\"active\">Show</NavLink>\n\t\t\t\t<NavLink to=\"/ask\" activeClassName=\"active\">Ask</NavLink>\n\t\t\t\t<NavLink to=\"/jobs\" activeClassName=\"active\">Jobs</NavLink>\n\t\t</nav>\n\t\t</StyledHeader>\n\t)\n}\n\n","import firebase from 'firebase/app'\nimport 'firebase/database'\n\nconst config = {\n\tdatabaseURL: \"https://hacker-news.firebaseio.com\"\n}\nconst version = \"/v0\"\n// const PAGE_LIMIT = 30\n\n\nfirebase.initializeApp(config)\nconst api = firebase.database().ref(version)\n\nexport function fetchItem(id, cb) {\n\titemRef(id).once('value', snapshot => cb(snapshot.val()))\n}\n\nexport function fetchItems(ids, cb) {\n\tlet items = []\n\tlet unsuccessful = 0\n\tids.forEach(id => {\n\t\tfetchItem(id, item => {\n\t\t\tif (item !== null) {\n\t\t\t\titems.push(item)\n\t\t\t} else {\n\t\t\t\tunsuccessful++\n\t\t\t}\n\t\t\tif (items.length >= ids.length - unsuccessful) {\n\t\t\t\tcb(items)\n\t\t\t}\n\t\t})\n\t})\n}\n\n\nexport function storiesRef(path) { return api.child(path) }\n\nexport function itemRef(id) { return api.child('item/' + id)}\n\n\n","import { useState, useEffect } from 'react'\nimport { itemRef, storiesRef } from '../firebase'\n\nconst WHOSHIRING_URL = \"https://hn.algolia.com/api/v1/search_by_date?tags=story,author_whoishiring\"\n\nexport function useItemSubscription(id) {\n\tconst [story, setStory] = useState({})\n\n\tuseEffect(() => {\n\t\tconst ref = itemRef(id)\n\t\tref.on('value', snapshot => {\n\t\t\t// console.log('snapshot val:',snapshot.val())\n\t\t\tconst val = snapshot.val()\n\t\t\tif (val !== null) {\n\t\t\t\tsetStory(snapshot.val())\n\t\t\t}\n\t\t})\n\t\treturn () => {\n\t\t\tref.off()\n\t\t}\n\t}, [id])\n\treturn story\n}\n\nexport function useHiringRequest() {\n\tconst [hiring, setHiring] = useState([])\n\t// const freelance = new RegExp(/^Ask HN: Freelancer\\?/)\n\t// const wanted  = new RegExp(/^Ask HN: Who is hiring\\?/)\n\t// const fulltime = new RegExp(/^Ask HN: Who wants to be hired\\?/)\n\t// const checkFreelance = obj => freelance.test(obj.title)\n\t\n\tuseEffect(async () => {\n\t\tconst res = await fetch(WHOSHIRING_URL).then(res => res.json())\n\t\t// console.log({res})\n\t\tconst posts = res.hits.slice(0,3)\n\t\tsetHiring(posts)\n\t},[])\n\n\treturn hiring\n}\n\nexport function useTopStories(filter, page = 1) {\n\tconst refPath = storyFilter(filter)\n\tconst [stories, setStories] = useState([])\n\tconst [maxPages, setMaxPages] = useState(1)\n\tconst maxPerPage = 40\n\tconst start = maxPerPage * (page - 1)\n\tconst end = start + maxPerPage\n\tuseEffect(() => {\n\t\tconst ref = storiesRef(refPath)\n\t\tref.on('value', snapshot => {\n\t\t\tconst ids = snapshot.val()\n\t\t\tconst page = ids.slice(start, end)\n\t\t\tconsole.log('LIST LENGTH:',snapshot.val().length)\n\t\t\tsetStories(page)\n\t\t\tsetMaxPages(Math.ceil(ids.length / maxPerPage))\n\t\t})\n\t\treturn () => {\n\t\t\tref.off()\n\t\t}\n\t}, [filter, page])\n\treturn [stories, maxPages]\n}\nfunction storyFilter(path) {\n\tswitch (path) {\n\t\tcase \"new\":\n\t\t\treturn \"newstories\"\n\t\tcase \"show\":\n\t\t\treturn \"showstories\"\n\t\tcase \"ask\":\n\t\t\treturn \"askstories\"\n\t\tcase \"jobs\":\n\t\t\treturn \"jobstories\"\n\t\tcase \"best\":\n\t\t\treturn \"beststories\"\n\t\tcase \"top\":\n\t\tdefault:\n\t\t\treturn \"topstories\"\n\t}\n}\n","export function host (url) {\n  const host = url.replace(/^https?:\\/\\//, '').replace(/\\/.*$/, '')\n  const parts = host.split('.').slice(-3)\n  if (parts[0] === 'www') parts.shift()\n  return parts.join('.')\n}\nexport function timeAgo (time) {\n  const between = Date.now() / 1000 - Number(time)\n  if (between < 60) {\n\t\treturn \"a moment ago\"\n  } else if (between < 3600) {\n    return pluralize(~~(between / 60), ' minute')\n  } else if (between < 86400) {\n    return pluralize(~~(between / 3600), ' hour')\n  } else {\n    return pluralize(~~(between / 86400), ' day')\n  }\n}\n\nfunction pluralize (time, label) {\n  if (time === 1) {\n    return time + label\n  }\n  return time + label + 's'\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Link } from 'react-router-dom'\n\nimport { host, timeAgo } from '../helpers'\nimport { useItemSubscription } from '../hooks'\n\nconst StyledItemCard = styled.div`\n\tbackground-color: #fff;\n\tpadding: 20px 30px 20px 80px;\n\tline-height: 20px;\n\tposition: relative;\n\tborder-bottom: 1px solid #eee\n\n\t.score {\n\t\tletter-spacing: 0.5px;\n\t\tcolor: #f60;\n\t\tposition: absolute;\n\t\tfont-size: 1.1em;\n\t\tfont-weight: 700;\n\t\ttop: 50%;\n\t\tleft: 0;\n\t\twidth: 80px;\n\t\tmargin-top: -10px;\n\t\ttext-align: center;\n\t\t}\n\t.meta, .host {\n\t\tfont-size: .85em;\n\t\tcolor: #828282;\n\t\ta {\n\t\t\tcolor: #828282;\n\t\t\ttext-decoration: underline;\n\t\t\t&:hover {\n\t\t\t\tcolor: #ff6600\n\t\t\t}\n\t\t}\n\t}\n\t@media (max-width: 600px) {\n\t\tpadding: 20px 30px 20px 60px;\n\t\t.score {\n\t\twidth: 60px;\n\t\t}\n\t}\n`\nexport default function NewsCard({id}) {\n\tconst story = useItemSubscription(id)\n\treturn (\n\t\t<StyledItemCard>\n\t\t\t<span className=\"score\">\n\t\t\t{story.score}\n\t\t\t</span>\n            <span>\n                {\n                    story.url ? \n                    <a href={story.url}>{story.title}</a> :\n                    <Link to={`/item/${story.id}`}>{story.title}</Link>\n                }\n\t\t\t\t\t{story.url ? <span className=\"host\">{` (${host(story.url)})`}</span> : null }\n\t\t\t\t</span>\n\t\t\t\t<br />\n\t\t\t\t<span className=\"meta\">\n\t\t\t\t\tby {story.by} {timeAgo(story.time)} | <Link to={`/item/${story.id}`}>{story.descendants ? `${story.descendants} comments`: \"discuss\"}</Link>\n\t\t\t</span>\n\t\t</StyledItemCard>\n\t)\n}\n\n","import React from 'react'\nimport { Link, Redirect } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { useTopStories, useHiringRequest } from '../hooks'\nimport NewsCard from './NewsCard.jsx'\n\nconst Container = styled.div`\n\tposition: relative;\n\t\n\t.list-nav {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 2px;\n\t\tpadding: 15px 30px;\n\t\tposition: fixed;\n\t\ttext-align: center;\n\t\ttop: 55px;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tz-index: 998\n\t\tbox-shadow: 0 1px 2px rgba(0,0,0,.1);\n\n\t\ta {\n\t\t\tmargin: 0 1em;\n\t\t}\n\t}\n\n\t.list {\n\t\tpadding-top: 100px;\n\t\tposition: absolute;\n\t\tmargin: 30px 0\n\t}\n\t@media (max-width: 600px) {\n\t\t.list {\n\t\t\tmargin: 10px 0\n\t\t}\n\t}\n\t.disabled {\n\t\tpointer-events: none;\n\t\tcolor: #d3d3d3;\n\t}\n`\nconst ListNav = ({ filter, page, maxPages })=> {\n\treturn (\n\t\t<div className=\"list-nav\">\n\t\t\t<Link \n\t\t\t\tto={`/${filter}/${page - 1}`}\n\t\t\t\tclassName={page <= 1 ? \"disabled\" : null}\n\t\t\t>&lt; prev</Link>\n\t\t<span>\n\t\t\t{page}/{maxPages}\n\t\t</span>\n\t\t<Link \n\t\t\tto={`/${filter}/${Number(page) + 1}`}\n\t\t\tclassName={page >= maxPages ? \"disabled\" : null}\n\t\t>next &gt;</Link>\n\t\t</div>\n\t)\n}\n\nconst Hiring = props => {\n\tconst posts = useHiringRequest()\n\treturn (\n\t\t<div className=\"list-nav\">\n\t\t\t<ul>\n\t\t\t\t{posts.map(({objectID, title})=> {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={objectID} style={{textAlign: \"left\"}}>\n\t\t\t\t\t\t\t<Link to={`/item/${objectID}`}>{title}</Link>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\n\nexport default function ListView({history, match}) {\n\tconsole.log(match.params)\n\tconst filter = match.params.filter || \"top\"\n\tconst page = match.params.page || 1\n\t// lets try something here...\n\tlet [items, maxPages] = useTopStories(filter, page)\n\tconst jobs = useHiringRequest()\n\tif (filter === 'jobs') {\n\t\titems = jobs.map(j => j.objectID).concat(items)\n\t}\n\tif (page > maxPages || page < 1) {\n\t\t// redirect if something funky goes on with our page number\n\t\treturn <Redirect to={`/${filter}`} />\n\t}\n\treturn (\n\t\t<Container style={{position: \"relative\"}}>\n\t\t\t{\n\t\t\t\tmaxPages > 1 ? \n\t\t\t\t<ListNav filter={filter} page={page} maxPages={maxPages} />\n\t\t\t\t: null\n\t\t\t}\n\t\t<div className=\"list\">\n\t\t\t{\n\t\t\t\titems.length > 0 && \n\t\t\t\titems.map(id => <NewsCard id={id} key={id}/>)\n\t\t\t}\n\t\t</div>\n</Container>\n\t)\t\n}\n","import React, { useState } from 'react'\nimport renderHTML from 'react-render-html'\nimport styled from 'styled-components'\n\nimport { timeAgo } from '../helpers'\nimport { useItemSubscription } from '../hooks'\n\nconst CommentContainer = styled.div`\n  background-color: #fff;\n  border-top: 1px solid #eee;\n  position: relative;\n  .by, .text, .toggle {\n    font-size: .9em;\n\tmargin: 1em 0;\n  }\n  .by {\n    color: #828282;\n\ta {\n      color: #828282;\n      text-decoration: underline;\n\t}\n  }\n  .text {\n\toverflow-wrap: break-word;\n\tword-wrap: break-word;\n\ta:hover {\n      color: #ff6600;\n\t}\n\tpre {\n\t  white-space: pre-wrap;\n\t}\n  }\n  .toggle {\n\tbackground-color: #fffbf2;\n\tpadding: .3em .5em;\n\tborder-radius: 4px;\n\t&.open {\n\t\tbackground-color: transparent;\n\t}\n  }\n`\nconst CommentChildren = styled.div`\n\t${props => props.open ? null : \"display: none;\"}\n\tmargin-left: 1.25em;\n`\n\nfunction Toggle({open, onClick, kidCount }) {\n\treturn (\n\t\t<span\n\t\t\tclassName={`toggle ${open ? \"open\" : null }`}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t{ open ? \"[-]\" : `[+${kidCount + 1}]` }\n\t\t</span>\n\t)\n}\n\n/*\n * Right now I think I'm running into issues where using hooks in my map is screwing something up\n * It might just be the conditional expression?\n * Nope! It was because I was calling the function? and not using a component?\n*/\nexport default function Comment({id}) {\n\tconst { by, time, text, kids = [], deleted, dead } = useItemSubscription(id)\n\tconst [showComments, setShowComments] = useState(true)\n\tfunction handleCommentToggle() {\n\t\tsetShowComments(!showComments)\n\t}\n\tif (deleted) {\n\t\tkids.length && console.log('Deleted has children!')\n\t\treturn (\n\t\t\t<CommentContainer>\n\t\t\t\t<div className=\"by\">[deleted]</div>\n\t\t\t</CommentContainer>\n\t\t)\n\t}\n\tif (dead) {\n\t\tkids.length && console.log('Dead has children!')\n\t\treturn (\n\t\t\tnull\n\t\t)\n\t}\n\treturn (\n\t\t<CommentContainer>\n\t\t\t<div className={`by toggle ${showComments ? \"open\" : null}`}>\n\t\t\t\t{by}\n\t\t\t\t{time && timeAgo(time)} ago\n\t\t\t\t<Toggle open={showComments} onClick={handleCommentToggle} kidCount={kids.length}/>\n\t\t\t</div>\n\t\t\t<CommentChildren open={showComments}>\n\t\t\t<div className=\"text\">\n\t\t\t{text && renderHTML(text)}\n\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tkids.length ? kids.map(id => <Comment key={id} id={id} />) : null\n\t\t\t\t}\n\t\t\t</CommentChildren>\n\t\t</CommentContainer>\n\t)\n}\n\n","import React from 'react'\nimport renderHTML from 'react-render-html'\nimport styled from 'styled-components'\n\nimport { timeAgo, host } from '../helpers'\nimport { useItemSubscription } from '../hooks'\nimport Comment from './Comment'\n\nconst ItemHeader = styled.div`\n  background-color: #fff;\n  padding: 1.8em 2em 1em;\n  box-shadow: 0 1px 2px rgba(0,0,0,.1);\n\tpadding-top: 55px;\n\tposition: relative;\n\tmargin: 30px 0;\n\n  a {\n\tcolor: #34495e;\n  }\n  h1 {\n    display: inline;\n    font-size: 1.5em;\n    margin: 0;\n    margin-right: .5em;\n  }\n  .host, .meta, .meta a {\n    color: #828282;\n  }\n  .meta a {\n\ttext-decoration: underline;\n\t}\n  @media (max-width: 600px) {\n\tmargin: 10px 0;\n\tpadding-top: 75px\n\th1 {\n\t font-size: 1.25em;\n\t}\n  }\n`\n\nconst ItemComments = styled.div`\n\tbackground-color: #fff;\n    margin-top: 10px;\n    margin-bottom: 30px;\n\tpadding: 0 2em .5em;\n\n\t.comments-header {\n\t\tmargin: 0;\n\t\tfont-size: 1.1em;\n\t\tpadding: 1em 0;\n\t\tposition: relative;\n\t}\n\n\t@media (max-width: 600px) {\n\t\tpadding: 0em 0.5em .5em\n\t\tcode {\n\t\t\twhite-space: pre-line;\n\t\t\tfont-size: 12px;\n\t}\n\t}\n\n`\n\nfunction LinkTitle(props) {\n\tconst { url, title } = props\n\tconsole.log(url)\n\treturn (\n\t\t<span>\n\t\t<a href={url}>\n\t\t\t<h1>{title}</h1>\n\t\t</a>\n\t\t<a className=\"host\" href={url}>\n\t\t\t({host(url)})\n\t\t</a> \n\t</span>\n\t)\n}\n\nexport default function Item({match}) {\n\tconst id = match.params.id\n\tconst { title, by, url, score, time, text, kids = [], descendants} = useItemSubscription(id)\n\treturn (\n\t\t<div>\n\t\t\t<ItemHeader>\n\t\t\t\t{\n\t\t\t\t\turl ? <LinkTitle url={url} title={title} /> :\n\t\t\t\t\t\t\t\t<h1>{title}</h1>\n\t\t\t\t}\n\t\t\t\t<p className=\"meta\">\n\t\t\t\t\t{score && score} points | by {by && by} {time && timeAgo(time)} ago\n\t\t\t\t</p>\n\t\t\t\t{\n\t\t\t\t\ttext ?\n\t\t\t\t\t\t<div className=\"ask-text\">{renderHTML(text)}</div> : null\n\t\t\t\t}\n\t\t\t</ItemHeader>\n\t\t\t<ItemComments> \n\t\t\t\t<div className=\"comments-header\">\n\t\t\t\t\t{descendants && descendants > 0 ? `${descendants} comments` : \"No comments\"}\n\t\t\t\t</div>\n\t\t\t{\n\t\t\t\tkids.length ? \n\t\t\t\t\tkids.map(id => <Comment key={id} id={id} />) : null\n\t\t\t}\n\t\t</ItemComments>\n\t</div>\n\t)\n}\n","import React, { Component } from 'react';\nimport { HashRouter as Router, Route, Switch, Redirect } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport Header from './components/Header'\nimport ListView from './components/ListView'\nimport Item from './components/Item'\n// import './App.css';\n\n// const NotFound = <h1>404</h1>\n\nconst ContentView = styled.div`\n\tmax-width: 800px;\n\tmargin: 0 auto;\n\tposition: relative;\n`\nclass App extends Component {\n  render() {\n    return (\n\t\t<Router>\n\t\t\t<div className=\"App\">\n\t\t<Header />\n\t\t<ContentView>\n\t\t\t<Switch>\n\t\t\t<Route exact path=\"/\" component={ListView} />\n\t\t\t<Route path=\"/:filter(top|jobs|new|show|ask)/:page?\" component={ListView} />\n\t\t\t<Route exact path=\"/item/:id\" component={Item} />\n\t\t\t<Redirect to=\"/\" />\n\t\t\t</Switch>\n\t\t</ContentView>\n\t\t\t</div>\n\t\t</Router>\n    );\n  }\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAiRJREFUSA1j/A8EDAMAmAbATrCVLDCLP6Qawpg0pQVmnwebP2A+HjCL4UGNLXyZxEUYGIUlwVL/3z5n+PfyDTZlCDE2ZgZmFS0I//8/hr/XryLk0Fh4LWZgZmbgzV/AwMDExPDvwyuGT9VeDAy//qIZgeCye8YxcPrkgQW+75qN12K8Qf3v2UuG7/uAFgMBk4AYA5tHDJiNjWAU4mPg8MgES/37/Jbh56ZZ2JTBxfBaDFL1a+MMhn9f3oM1cHpkMTAK8sE1IzM4wioZGFlYwULfljcwMPz8gyyNwSZo8f8fvxm+rWgCa2RkZWPgCC/HMIRZVY2B3dgDLP779mmGP6ePYKhBFyBoMUjDn5MHGH7fg+Q/dmMvYAJSQZjDxMjAGQ1xGMO/fwzfF9cg5PCwiLIYpB9sILR05YwCWsTICDaW1dqdgUVaHcwGpYd/z1+B2YQIoi3+9+QZw48Di8HmschqMrBauzIwcrAxcAZDgv7f53cMP4HpgVhAtMUgA3+un8rw7+sHsNmcwZUMHJFlDEzcAmD+t5XAUACmB2IBSRb///6L4fvqVrDZTDwCDOxWwWD277vngOngILF2QvSTpBqo+PexvQx/HlxGaAPG+/fF1Qg+kSySfAw2E2TRuk648T/PbGH49/QFnE8sg3SLgSb///oRbv5/YKIiB5BlMTkWoesZtRg9RGjGH3lBjb8FgiOg/z16wkBpq3TkBfWA+ZhxxPWdACF6m6mcsEGuAAAAAElFTkSuQmCC\""],"sourceRoot":""}